# 🛠️ 配置

:::tip

配置文件会在启动时自动生成在根目录。

:::

## Config.yaml 主配置文件

`config.yaml` 配置文件示例如下：

```yaml
cache:
    external: false
    hosts: []
    master: ""
    username: ""
    password: ""
database:
    type: sqlite
    host: ""
    name: ""
    username: ""
    password: ""
gocqhttp:
    enable: false
    host_url: http://127.0.0.1:5700
    delay: 3000
    enable_ws: false
logging:
    external: false
    mongo_uri: mongodb://
    mongo_db: ""
    cache_num: 80
    internal_log: false
mirai:
    enable: false
plugin:
    lua_enable: true
    lua_script_dir: scripts
    lua_sandbox: false
search:
    enable: false
    host: ""
    index_name: ""
    username: ""
    password: ""
server:
    listen_port: "3000"
    rpc_port: "3001"
    debug_mode: false
    file_logger: false

```

### Server 服务器配置

- `listen_port` 监听端口：**HTTP** 监听端口与 **Websocket** 监听端口
- `rpc_port` gRPC监听端口
- `debug_mode` 调试模式：输出程序调试日志到终端，默认为 `true` 开启
- `file_logger` 文件日志：将日志输出到文件 (**Beta**)

### Search 搜索引擎配置

:::caution

暂未实现该功能！

:::

- `type` 驱动器类型： 搜索引擎驱动器类型，默认为 `internal`
- `host` 服务器地址： 搜索引擎的远端服务器地址
- `index_name` 索引名称： 搜索引擎的索引名称（自定义）
- `username` 用户名：搜索引擎连接认证用户名
- `password` 密码： 搜索引擎连接认证密码

### Cache 缓存配置

- `external` 是否使用外置缓存器
- `host` 服务器地址： 缓存的远端服务器地址
- `master` 主从模式Redis地址
- `username` 用户名：缓存连接认证用户名
- `password` 密码： 缓存连接认证密码

### Queue 队列配置

:::caution

暂未实现该功能！

:::

- `type` 驱动器类型： 队列驱动器类型，默认为 `internal`
- `host` 服务器地址： 队列的远端服务器地址
- `index_name` 前缀名称： 队列的前缀名称（自定义）
- `username` 用户名：队列连接认证用户名
- `password` 密码： 队列连接认证密码

### Database 数据库配置


- `type` 驱动器类型： 数据库驱动器类型，默认为 `sqlite` (可选：MySQL,Postgres)
- `host` 服务器地址： 数据库的远端服务器地址
- `name` 数据库名称： 数据库的名称
- `username` 用户名：数据库连接认证用户名
- `password` 密码： 数据库连接认证密码

### GoCqHttp 相关配置

:::tip

延迟时间默认为 `3000` 毫秒，如果 **GoCqHttp** 服务响应时间过长，可以适当调整延迟时间。（调整该参数可能造成机器人账号风控）

启用 **WebSocket** 后，服务器地址填写 **GoCqHttp** 的 **WebSocket** 地址，例如 `ws://127.0.0.1:8000`，将启用正向 **WebSocket** 连接。

:::

- `enable` 是否启用：是否启用 **GoCqHttp** 服务
- `host_url` 服务器地址： **GoCqHttp** 服务的地址
- `delay` 延迟时间：**GoCqHttp** 响应延迟时间
- `enable_ws` 启用WS：是否启用 **Websocket** 服务

### Logging 日志记录器

- `external` 是否启用外置日志记录器
- `mongo_uri` MongoDB连接地址
- `mongo_db` MongoDB数据库名称
- `cache_num` 记录缓存数量
- `internal_log` 是否将日志记录到数据库

### Plugin 插件管理

- `lua_enable` 是否启用Lua脚本支持
- `lua_script_dir` Lua脚本目录



## Lua.ini Lua脚本管理

```ini
[example]
enable = false
script = example.lua
```
:::caution

中括号内的插件名称必须唯一

:::


- `enable` 是否启用该脚本
- `script` 脚本文件名称